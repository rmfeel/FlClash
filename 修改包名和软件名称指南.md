# ä¿®æ”¹åŒ…åå’Œè½¯ä»¶åç§°æŒ‡å—

## ğŸ“ éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶

### 1. ä¿®æ”¹è½¯ä»¶åç§°

#### æ–‡ä»¶: `pubspec.yaml` (ç¬¬ 1 è¡Œ)
```yaml
# åŸæ¥
name: fl_clash

# æ”¹ä¸ºæ‚¨çš„åç§°ï¼Œä¾‹å¦‚ï¼š
name: my_clash
```

#### æ–‡ä»¶: `android/app/src/main/AndroidManifest.xml`

**ç¬¬ 31 è¡Œ** - åº”ç”¨æ˜¾ç¤ºåç§°ï¼š
```xml
<!-- åŸæ¥ -->
android:label="FlClash">

<!-- æ”¹ä¸ºæ‚¨çš„åç§°ï¼Œä¾‹å¦‚ï¼š -->
android:label="MyClash">
```

**ç¬¬ 90 è¡Œ** - å¿«æ·è®¾ç½®ç£è´´åç§°ï¼š
```xml
<!-- åŸæ¥ -->
android:label="FlClash"

<!-- æ”¹ä¸º -->
android:label="MyClash"
```

---

### 2. ä¿®æ”¹åŒ…åï¼ˆAndroidï¼‰

#### æ–‡ä»¶: `android/app/build.gradle.kts`

**ç¬¬ 28 è¡Œ** - namespaceï¼š
```kotlin
// åŸæ¥
namespace = "com.follow.clash"

// æ”¹ä¸ºæ‚¨çš„åŒ…åï¼Œä¾‹å¦‚ï¼š
namespace = "com.yourcompany.myclash"
```

**ç¬¬ 40 è¡Œ** - applicationIdï¼š
```kotlin
// åŸæ¥
applicationId = "com.follow.clash"

// æ”¹ä¸ºï¼ˆä¸ namespace ä¿æŒä¸€è‡´ï¼‰ï¼š
applicationId = "com.yourcompany.myclash"
```

---

### 3. ä¿®æ”¹ URL Schemeï¼ˆå¯é€‰ï¼‰

å¦‚æœè¦ä¿®æ”¹åº”ç”¨çš„è‡ªå®šä¹‰ URL schemeï¼š

#### æ–‡ä»¶: `android/app/src/main/AndroidManifest.xml` (ç¬¬ 59-61 è¡Œ)

```xml
<!-- åŸæ¥ -->
<data android:scheme="clash" />
<data android:scheme="clashmeta" />
<data android:scheme="flclash" />

<!-- æ”¹ä¸ºæ‚¨çš„ schemeï¼Œä¾‹å¦‚ï¼š -->
<data android:scheme="clash" />
<data android:scheme="clashmeta" />
<data android:scheme="myclash" />
```

---

## ğŸ”§ å®Œæ•´ä¿®æ”¹æ­¥éª¤

### æ­¥éª¤ 1: ä¿®æ”¹ pubspec.yaml

```bash
# æ‰“å¼€æ–‡ä»¶
lib/pubspec.yaml

# ä¿®æ”¹ç¬¬ 1 è¡Œ
name: my_clash  # æ”¹æˆæ‚¨çš„åç§°
```

### æ­¥éª¤ 2: ä¿®æ”¹ Android é…ç½®

```bash
# 1. ä¿®æ”¹ build.gradle.kts
android/app/build.gradle.kts
  - ç¬¬ 28 è¡Œ: namespace = "com.yourcompany.myclash"
  - ç¬¬ 40 è¡Œ: applicationId = "com.yourcompany.myclash"

# 2. ä¿®æ”¹ AndroidManifest.xml
android/app/src/main/AndroidManifest.xml
  - ç¬¬ 31 è¡Œ: android:label="MyClash"
  - ç¬¬ 90 è¡Œ: android:label="MyClash"
  - (å¯é€‰) ç¬¬ 61 è¡Œ: scheme
```

### æ­¥éª¤ 3: ç§»åŠ¨ Kotlin/Java æ–‡ä»¶ï¼ˆé‡è¦ï¼ï¼‰

å¦‚æœæ‚¨ä¿®æ”¹äº†åŒ…åï¼Œéœ€è¦ç§»åŠ¨æºä»£ç æ–‡ä»¶åˆ°æ–°çš„åŒ…è·¯å¾„ï¼š

```bash
# åŸè·¯å¾„
android/app/src/main/kotlin/com/follow/clash/

# æ–°è·¯å¾„ï¼ˆæ ¹æ®æ‚¨çš„æ–°åŒ…åï¼‰
android/app/src/main/kotlin/com/yourcompany/myclash/

# éœ€è¦ç§»åŠ¨çš„æ–‡ä»¶ï¼š
- Application.kt
- BroadcastReceiver.kt
- MainActivity.kt
- TempActivity.kt
- TileService.kt
```

**Windows PowerShell å‘½ä»¤**ï¼š
```powershell
# åˆ›å»ºæ–°ç›®å½•
New-Item -Path "android/app/src/main/kotlin/com/yourcompany/myclash" -ItemType Directory -Force

# ç§»åŠ¨æ–‡ä»¶
Move-Item -Path "android/app/src/main/kotlin/com/follow/clash/*" -Destination "android/app/src/main/kotlin/com/yourcompany/myclash/"

# åˆ é™¤æ—§ç›®å½•
Remove-Item -Path "android/app/src/main/kotlin/com/follow" -Recurse
```

### æ­¥éª¤ 4: ä¿®æ”¹ Kotlin æ–‡ä»¶çš„ package å£°æ˜

ä¿®æ”¹æ‰€æœ‰ç§»åŠ¨çš„ Kotlin æ–‡ä»¶ï¼ˆApplication.kt, MainActivity.kt ç­‰ï¼‰çš„ç¬¬ä¸€è¡Œï¼š

```kotlin
// åŸæ¥
package com.follow.clash

// æ”¹ä¸º
package com.yourcompany.myclash
```

### æ­¥éª¤ 5: æ¸…ç†å¹¶é‡æ–°æ„å»º

```bash
# æ¸…ç†
flutter clean

# é‡æ–°è·å–ä¾èµ–
flutter pub get

# é‡æ–°æ„å»º
flutter build apk
# æˆ–
flutter build windows
```

---

## âš ï¸ é‡è¦æç¤º

### åŒ…åå‘½åè§„èŒƒ

âœ… **æ­£ç¡®çš„åŒ…åæ ¼å¼**ï¼š
```
com.company.appname
com.yourname.project
io.github.username
```

âŒ **é”™è¯¯çš„åŒ…åæ ¼å¼**ï¼š
```
MyApp              (æ²¡æœ‰ç‚¹åˆ†éš”ç¬¦)
com.My-App         (ä¸èƒ½æœ‰è¿å­—ç¬¦)
com.123app         (ä¸èƒ½ä»¥æ•°å­—å¼€å¤´)
com.app name       (ä¸èƒ½æœ‰ç©ºæ ¼)
```

### åŒ…åè§„åˆ™

1. åªèƒ½åŒ…å«å°å†™å­—æ¯ã€æ•°å­—å’Œç‚¹ï¼ˆ.ï¼‰
2. æ¯ä¸ªéƒ¨åˆ†ä¸èƒ½ä»¥æ•°å­—å¼€å¤´
3. å»ºè®®ä½¿ç”¨åå‘åŸŸåæ ¼å¼ï¼ˆcom.å…¬å¸.åº”ç”¨ï¼‰
4. ä¸€æ—¦å‘å¸ƒåˆ°åº”ç”¨å•†åº—ï¼Œ**ä¸èƒ½å†ä¿®æ”¹**

### Windows å¹³å°

å¯¹äº Windows å¹³å°ï¼Œè¿˜éœ€è¦ä¿®æ”¹ï¼š

#### æ–‡ä»¶: `windows/runner/main.cpp`
æŸ¥æ‰¾å¹¶ä¿®æ”¹çª—å£æ ‡é¢˜ç›¸å…³çš„ä»£ç 

#### æ–‡ä»¶: `windows/runner/Runner.rc`
ä¿®æ”¹åº”ç”¨ç¨‹åºä¿¡æ¯

---

## ğŸ“‹ ä¿®æ”¹æ£€æŸ¥æ¸…å•

å®Œæˆä¿®æ”¹åï¼Œè¯·æ£€æŸ¥ä»¥ä¸‹å†…å®¹ï¼š

- [ ] `pubspec.yaml` - åº”ç”¨åç§°
- [ ] `android/app/build.gradle.kts` - namespace å’Œ applicationId
- [ ] `android/app/src/main/AndroidManifest.xml` - labelï¼ˆ2å¤„ï¼‰
- [ ] Kotlin æºæ–‡ä»¶å·²ç§»åŠ¨åˆ°æ–°åŒ…è·¯å¾„
- [ ] æ‰€æœ‰ Kotlin æ–‡ä»¶çš„ package å£°æ˜å·²æ›´æ–°
- [ ] å·²æ¸…ç†å¹¶é‡æ–°æ„å»ºé¡¹ç›®
- [ ] åº”ç”¨èƒ½æ­£å¸¸è¿è¡Œ

---

## ğŸ¯ ç¤ºä¾‹ï¼šå®Œæ•´ä¿®æ”¹

å‡è®¾è¦å°†åŒ…åä» `com.follow.clash` æ”¹ä¸º `com.mycompany.myvpn`ï¼š

### 1. pubspec.yaml
```yaml
name: my_vpn
```

### 2. android/app/build.gradle.kts
```kotlin
namespace = "com.mycompany.myvpn"
applicationId = "com.mycompany.myvpn"
```

### 3. AndroidManifest.xml
```xml
android:label="MyVPN"
```

### 4. ç§»åŠ¨æ–‡ä»¶
```
android/app/src/main/kotlin/com/mycompany/myvpn/
```

### 5. æ›´æ–° package
```kotlin
package com.mycompany.myvpn
```

### 6. é‡æ–°æ„å»º
```bash
flutter clean
flutter pub get
flutter build apk
```

---

## ğŸ’¡ æç¤º

- **æµ‹è¯•å»ºè®®**: ä¿®æ”¹å®Œæˆåï¼Œå…ˆåœ¨ debug æ¨¡å¼æµ‹è¯•ï¼Œç¡®è®¤æ— è¯¯åå†æ‰“ release åŒ…
- **å¤‡ä»½é‡è¦**: ä¿®æ”¹å‰å»ºè®®å¤‡ä»½æ•´ä¸ªé¡¹ç›®
- **ç‰ˆæœ¬æ§åˆ¶**: ä½¿ç”¨ Git æäº¤ä¿®æ”¹ï¼Œä¾¿äºå›æ»š
- **æ–‡æ¡£æ›´æ–°**: ä¿®æ”¹å®Œæˆåæ›´æ–°é¡¹ç›®æ–‡æ¡£

---

## â“ å¸¸è§é—®é¢˜

### Q: ä¿®æ”¹åç¼–è¯‘å¤±è´¥ï¼Ÿ
A: æ£€æŸ¥æ‰€æœ‰ Kotlin æ–‡ä»¶çš„ package å£°æ˜æ˜¯å¦å·²æ›´æ–°

### Q: å®‰è£…æ—¶æç¤ºåŒ…åå†²çªï¼Ÿ
A: å…ˆå¸è½½æ—§ç‰ˆæœ¬åº”ç”¨ï¼Œæˆ–ä½¿ç”¨ä¸åŒçš„åŒ…å

### Q: å›¾æ ‡æ²¡æœ‰æ”¹å˜ï¼Ÿ
A: å›¾æ ‡éœ€è¦å•ç‹¬æ›¿æ¢ `android/app/src/main/res/` ç›®å½•ä¸‹çš„å›¾æ ‡æ–‡ä»¶

### Q: URL Scheme ä¸å·¥ä½œï¼Ÿ
A: æ£€æŸ¥ AndroidManifest.xml ä¸­çš„ scheme é…ç½®æ˜¯å¦æ­£ç¡®

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. åŒ…åæ ¼å¼æ˜¯å¦ç¬¦åˆè§„èŒƒ
2. æ‰€æœ‰æ–‡ä»¶çš„ package å£°æ˜æ˜¯å¦ä¸€è‡´
3. æ˜¯å¦æ‰§è¡Œäº† `flutter clean`
4. é¡¹ç›®æ˜¯å¦èƒ½æ­£å¸¸ç¼–è¯‘

ç¥æ‚¨ä¿®æ”¹é¡ºåˆ©ï¼ğŸ‰
